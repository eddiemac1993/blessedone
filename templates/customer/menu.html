{% extends 'base.html' %}

{% block content %}

<style>
.restaurant-card {
  height: 300px;
  background-size: cover;
  background-position: center;
  border-radius: 10px;
  position: relative;
}

.restaurant-card-content {
  position: absolute;
  bottom: 0;
  left: 0;

}

.restaurant-card-title {
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: black;
}

.restaurant-card-desc {
  font-size: 1rem;
  color: black;
}

.price-badge {
  background-color: orange;
  color: white;
  font-weight: bold;
  padding: 0.25rem 0.5rem;
  border-radius: 5px;
}

.card-link {
  color: black;
  text-decoration: none;
}

.whatsapp-share {
  display: inline-block;
  margin-top: 0.5rem;
  background-color: rgba(37, 211, 102, 0.7);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  text-decoration: none;
}

.transparent-bg {
  background-color: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(5px);
}

@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');
</style>

<div class="container">

  <div class="row justify-content-start mt-4">
    <div class="col-md-6 col-sm-12 text-center">
      <a href="{% url 'customer:index' %}" class="btn btn-outline-primary">Go Back</a>
    </div>
  </div>

  <div class="row justify-content-center mt-5">
    <div class="col-md-8 col-sm-12 text-center">
      <h1 class="display-4">Discover Our Marketplace</h1>
      <p class="lead">Find your best products from our selection of quality products</p>
    </div>
  </div>

  <div class="row justify-content-center mt-5">
    <div class="col-md-8 col-sm-12 text-center">
      <form method="GET" action="{% url 'customer:menu-search' %}">
        <div class="input-group mb-3">
          <input type="text" class="form-control rounded-pill" name="q" placeholder="Search our marketplace" aria-label="Search" value="{{ request.GET.q }}">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary rounded-pill" type="submit"><i class="fas fa-search"></i></button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="row justify-content-center">
    {% for item in menu_items %}
    <div key="{{ item.id }}" class="col-md-4 col-sm-6 col-12 text-center mb-5 mt-5">
      <div class="restaurant-card">
        <a href="{% url 'customer:order-search' %}?q={{ item.name }}">
          <img src="{{ item.image.url }}" alt="{{ item.name }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 10px;">
        </a>
        <div class="restaurant-card-content">
          <div class="">

            <p class="">
              <span class="price-badge">Price: ZMK {{ item.price }}</span>
            </p>


        </div>
      </div>
    </div>
    <h5 class="restaurant-card-title">{{ item.name }}</h5>
                <p class="restaurant-card-desc">{{ item.description }}</p>
      <meta property="og:image" content="{{ item.image.url }}">
     <a href="https://wa.me/260970349470?text=%0AItem: {{ item.name|urlencode }}%0APrice: ZMK {{ item.price }}%0A{{ item.description|urlencode|safe }}%0A{{ request.build_absolute_uri }}menu/search/?q={{ item.name|urlencode }}" class="whatsapp-share" target="_blank" rel="noopener noreferrer">
  <i class="fa fa-share-alt" aria-hidden="true"></i>
</a>

          </div>

    {% endfor %}
  </div>

</div>

{% endblock content %}
