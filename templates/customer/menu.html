{% extends 'base.html' %}

{% block content %}

<style>
.restaurant-card {
  height: 300px;
  background-size: cover;
  background-position: center;
  border-radius: 10px;
  position: relative;
}

.restaurant-card-content {
  position: absolute;
  bottom: 0;
  right: 0;
  padding: 1rem;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  border-radius: 10px;
}

.restaurant-card-title {
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
}

.restaurant-card-desc {
  font-size: 1rem;
}

.price-badge {
  background-color: orange;
  color: white;
  font-weight: bold;
  padding: 0.25rem 0.5rem;
  border-radius: 5px;
}

.card-link {
  color: white;
  text-decoration: none;
}

.whatsapp-share {
  display: inline-block;
  margin-top: 0.5rem;
  background-color: #25D366;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  text-decoration: none;
}

@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');
</style>

<div class="container">

  <div class="row justify-content-start mt-4">
    <div class="col-md-6 col-sm-12 text-center">
      <a href="{% url 'customer:index' %}" class="btn btn-outline-primary">Go Back</a>
    </div>
  </div>
  
  <div class="row justify-content-center mt-5">
    <div class="col-md-8 col-sm-12 text-center">
      <h1 class="display-4">Discover Our Marketplace</h1>
      <p class="lead">Find your favorite meals and drinks from our selection of quality products</p>
    </div>
  </div>
  
  <div class="row justify-content-center mt-5">
    <div class="col-md-8 col-sm-12 text-center">
      <form method="GET" action="{% url 'customer:menu-search' %}">
        <div class="input-group mb-3">
          <input type="text" class="form-control rounded-pill" name="q" placeholder="Search our marketplace" aria-label="Search" value="{{ request.GET.q }}">
          <div class="input-group-append">
            <button class="btn btn-outline-secondary rounded-pill" type="submit"><i class="fas fa-search"></i></button>
          </div>
        </div>
      </form>
    </div>
  </div>
  
  <div class="row justify-content-center">
    {% for item in menu_items %}
    <div key="{{ item.id }}" class="col-md-4 col-sm-6 col-12 text-center mb-5 mt-5">
      <div class="restaurant-card" style="background-image: url('{{ item.image.url }}')">
        <a href="{{ item.image.url }}" target="_blank" rel="noopener noreferrer" class="card-link">
          <div class="restaurant-card-content">
            <div class="restaurant-card-content-items">
              <h5 class="restaurant-card-title">{{ item.name }}</h5>
              <p class="restaurant-card-desc">
                <span class="price-badge">Price: ZMK {{ item.price }}</span>
              </p>
              <p class="restaurant-card-desc">{{ item.description }}</p>
            </div>
           <a href="https://api.whatsapp.com/send?text={{ item.name }}%0APrice: ZMK {{ item.price }}%0A{{ item.description }}%0A{{ request.build_absolute_uri }}" class="whatsapp-share" target="_blank" rel="noopener noreferrer">Share on WhatsApp</a>
          </div>
        </a>
      </div>
    </div>
    {% endfor %}
  </div>

</div>

{% endblock content %}
